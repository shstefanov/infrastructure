//- Creates tab button. first is by default 'active'
//- +doc_example_tab_items("states_root", {
//-   "cli":     "cli", 
//-   "package": "package.json"
//- })

//- Create tab content item
//- locals.getContentStateTemplate("states_root.cli") gets state template generated by doc_example_tab_items
//- div(class!=locals.getContentStateTemplate("states_root.cli")): pre: code.language-bash.
//-   npm install infrastructure
  
//- div(class!=locals.getContentStateTemplate("states_root.package")): pre: code.language-javascript.
//-   "dependencies": {
//-     "infrastructure": "^1.0.0"
//-   }


- locals.example_contents_states = {}
- locals.getContentStateTemplate = function(item_flag){ return locals.example_contents_states[item_flag] }

mixin doc_example_tab_items(base, items)
  - var active = base + "." + "__active"
  - var initial = true
  ul.nav.nav-tabs
    each text, name in items
      - var item_flag = base + '.' + name
      - var class_template = "{{condition("+item_flag+(initial? (" || !"+active): "")+", 'active')}}"
      li(class=class_template): a(href="javascript: void(0);", on-click="radioToggle('#{item_flag}', true)") #{text}
      - if(initial)
        - locals.example_contents_states[item_flag] = "{{condition(!"+item_flag+",  condition( "+active+" ,'hide' )  )}}"
      - else
        - locals.example_contents_states[item_flag] = "{{condition(!"+item_flag+", 'hide'  )}}"
      - initial = false